{{ 'component-slick-slider.css' | asset_url | stylesheet_tag }}

<div class="slick">
  <div class="slick-container row">
    {% for product in section.settings.collection.products %}
      <div class="slide">
        <img draggable="false" src="{{ product.featured_image | image_url }}">
      </div>
    {% endfor %}
  </div>
</div>


<script>
  const slider = document.getElementsByClassName('slick')[0]
  
  // Mouse events
  slider.addEventListener('mousedown', dragStart);
  slider.addEventListener('mousemove', dragAction);
  slider.addEventListener('mouseup', dragEnd);
  slider.addEventListener('mouseleave', dragEnd);

  // Touch events
  slider.addEventListener('touchstart', dragStart);
  slider.addEventListener('touchmove', dragAction);
  slider.addEventListener('touchend', dragEnd);

  let isDown = false;
  let startX;
  let scrollLeft;
  
  function dragStart (e) {
    isDown = true;
    startX = e.pageX - slider.offsetLeft;
    scrollLeft = slider.scrollLeft;
  }

  function dragAction (e) {
    if(!isDown) return; // stop the fn from running
    const x = e.pageX - slider.offsetLeft; 
    const walk = x - startX;
    slider.scrollLeft = scrollLeft - walk;
  }

  function dragEnd (e) {
    isDown = false;
  }
</script>

{% schema %}
  {
    "name": "Slick Slider",
    "settings": [
      {
        "type": "collection",
        "id": "collection",
        "label": "Collection"
      }
    ],
    "presets": [
      {
        "name": "Slick Slider" 
      }
    ]
  }
{% endschema %}