{{ 'component-options-available-card.css' | asset_url | stylesheet_tag }}

{% style %}
  .options-available-card__title, .card99__title, .card99__product-information {
    color: {{ section.settings.text__color }};
  }
{% endstyle %}

<script src="{{ 'options-available-card.js' | asset_url }}" defer="defer"></script>

<div class="color-{{ section.settings.color_scheme }}">
  <div class="container4">
    <h3 class="options-available-card__title">{{ section.settings.collection_title }}</h3>
    <div class="row4">
      {% for product in section.settings.collection.products %}
        {% assign img_size = product.images | size %}
        <div class= "card99">
          <div class="card99__card">
            <div class="card99__featured-image">
              <img 
                srcset="
                  {% if product.featured_media.width >= 165 %}{{ product.featured_media | image_url: width: 165 }} 165w,{% endif %}
                  {% if product.featured_media.width >= 360 %}{{ product.featured_media | image_url: width: 360 }} 360w,{% endif %}
                  {% if product.featured_media.width >= 533 %}{{ product.featured_media | image_url: width: 533 }} 533w,{% endif %}
                  {% if product.featured_media.width >= 720 %}{{ product.featured_media | image_url: width: 720 }} 720w,{% endif %}
                  {% if product.featured_media.width >= 940 %}{{ product.featured_media | image_url: width: 940 }} 940w,{% endif %}
                  {% if product.featured_media.width >= 1066 %}{{ product.featured_media | image_url: width: 1066 }} 1066w{% endif %}
                "
                src="{{ product.featured_media | image_url: width: 533 }}" 
                sizes="(min-width: 1000px) 25vw, 50vw"
                class="card99__img" 
                draggable="false"
                loading="lazy"
                width="{{ product.featured_media.width }}"
                height="{{ product.featured_media.height }}"
              >
            </div>
            <div class="product-images">
              <div class="card-carousel" data-carousel>
                <button class="slide-btn prev" data-slide-btn="prev" {% unless img_size > 1  %}style="display:none;"{% endunless %}>
                  <svg width="6" height="10" viewBox="0 0 6 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M5.5 1L1 5L5.5 9" stroke="#452B1A" stroke-linecap="round" stroke-linejoin="round"></path>
                  </svg>
                </button>
                <button class="slide-btn next" data-slide-btn="next" {% unless img_size > 1  %}style="display:none;"{% endunless %}>
                  <svg width="6" height="10" viewBox="0 0 6 10" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M1 1L5.5 5L1 9" stroke="#452B1A" stroke-linecap="round" stroke-linejoin="round"></path>
                  </svg>
                </button>
                  <ul class="card-carousel__list" data-slides>
                    {% for image in product.images %}
                      <li class="img-slide {% if image.position == 2 %}data-active{% endif %}">
                        <img 
                          srcset="
                            {% if image.width >= 165 %}{{ image | image_url: width: 165 }} 165w,{% endif %}
                            {% if image.width >= 360 %}{{ image | image_url: width: 360 }} 360w,{% endif %}
                            {% if image.width >= 533 %}{{ image | image_url: width: 533 }} 533w,{% endif %}
                            {% if image.width >= 720 %}{{ image | image_url: width: 720 }} 720w,{% endif %}
                            {% if image.width >= 940 %}{{ image | image_url: width: 940 }} 940w,{% endif %}
                            {% if image.width >= 1066 %}{{ image | image_url: width: 1066 }} 1066w{% endif %}
                          "
                          src="{{ image | image_url: width: 533 }}"
                          sizes="(min-width: 1000px) 25vw, 50vw"
                          class="img-slide__img img-{{ forloop.index }}" 
                          draggable="false"
                          loading="lazy"
                          width="{{ image.width }}"
                          height="{{ image.height }}"
                          alt="{{ image.alt | escape }}"
                        >
                      </li>
                    {% endfor %}
                  </ul>
              </div>
            </div>
          </div>   
          <div class="card99__product-information">
            <div class="card99__title-price"> 
              <h2 class="card99__title">Jean Shorts</h2>
              <div class="card99__price">
                <span>$45</span>
              </div>
              <div class="card99__swatches">
                <span>Swatches</span>
              </div>
            </div>
            <div class="size-options">
              <span>SMLXL</span>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</div>

{% schema %}
  {
    "name": "Options available cards",
    "settings": [
      {
        "type": "color_scheme",
        "id": "color_scheme",
        "label": "Color Scheme",
        "default": "accent-1"
      },
      {
        "type": "color",
        "id": "text__color",
        "label": "Text Color"
      },
      {
        "type": "text",
        "id": "collection_title",
        "label": "Title"
      },
      {
        "type": "collection",
        "id": "collection",
        "label": "Collection"
      }
    ],
    "presets": [
      {
        "name": "Options available cards"
      }
    ]
  }
{% endschema %}
